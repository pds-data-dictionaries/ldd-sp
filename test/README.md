# Regression Test Directory

This directory contains files used to perform regression testing of the Spectral Discipline Dictionary.

> **NOTE:** The "valid" test labels do not attempt to show anything likst a real-world use of the
>           Spectral Dictionary classes.  They are "valid" only insofar as they meet the structural
>           requirements and content restrictions that are laid out in the Spectral Dictionary. ***Do NOT
>           attempt to use these as templates for real data without understanding the proper application
>           of the Spectral Dictionary metadata.*** 

## Automated Testing Files

The test file set includes:

* *SP-Test1-VALID.xml* and *SP-Test2-VALID.xml* - Two test labels that should show no validation errors
* *SP-Test1-FAIL.xml* and *SP-Test2-FAIL.xml* - Two test labels identical to the corresponding *VALID*
              labels, except with specific, documented errors to demonstrate proper behavior of key
              Spectral class features

The labels are formatted to work with the automated build process in this repo, so all references to 
schema files have been removed. Test results are part of the reports generated by the _Actions_ used
to build the schemas.

## Local Testing

If you want to run the regressions tests locally, you will also need these files:

* *No.Data* - A zero-length file used to satisfy the *Validate* tool requirement that a data file be
              present. (No data validation is done for data objects relevant to the Spectral Dictionary
              classes.)
* *val.config* - The configuration file passed to *Validate* to run validation on all four labels
* *validate.rpt* - The report produced by *Validate* showing the expected validation success and failure
              messages.              
              
And you will need to do some editing:

1. In the test labels, add the Schematron (_.sch_) and schema (_.xsd_) references for the specific IM release you want to test against for both the core schema the Spectral Discipline Dictionary schema.
2. Replace "[IM_VERSION]" in the ```<information_model_version_id>``` tag with the IM version number corresponding to you core schema version.
3. Edit the _val.config_ file to reference the IM model version and local schemas you want to check against.
4. Either rename the current _validate.rpt_ file, or change _val.config_ to send output to a file with a different name.
5. Run this command (inside the ```Test/``` directory in the current _val.config_ configuration):

          % validate -config val.config
      
Then you can compare the output report to the original _validate.rpt_.
